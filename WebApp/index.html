<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/bootstrap.daterangepicker/2/daterangepicker.css" />
    <style>
    	h1 {
    		text-align: center;
    	}
    </style>

    <title>The Daily Summary</title>
  </head>
  <body>
  	<div class="title container">
    	<h1>My Daily Summary</h1>
	</div>
	<hr />
	<br />
		<div class="container">
			<form>
				<div class="form-group blog-names">
					<label for="blogName">Blog / Website</label>
					<div class="radio" name="reuters">
					  <label><input type="radio" name="optradio">Reuter's (www.reuters.com/articles)</label>
					</div>
					<!-- <div class="radio disabled">
					  <label><input type="radio" name="optradio" disabled>LinkedIn</label>
					</div>
					<div class="radio" name="spoon-tamago">
					  <label><input type="radio" name="optradio">Spoon & Tamago</label>
					</div> -->
				</div>
				<hr/>
				<div class="form-group">
					<label for="dateRange">Date Range</label>
					<div id="reportrange" class="pull-right" style="background: #fff; cursor: pointer; padding: 5px 10px; border: 1px solid #ccc; width: 100%">
					    <i class="glyphicon glyphicon-calendar fa fa-calendar"></i>&nbsp;
					    <span></span> <b class="caret"></b>
					</div>
				</div>
				<hr/>
				<div class="form-group topics-of-interest">
					<label for="topicCategories">Topics of Interest</label>
					<div class='container'>
				  	</div>
				  </div>
				  <hr/>
				  <div class="form-group">
				    <label for="exampleSelect1">Summary Length</label>
				    <select class="form-control" id="exampleSelect1">
				      <option>Auto (Currently 3 Sentences)</option>
				      <option>(1) Sentence</option>
				      <option>(2) Sentences</option>
				      <option>(3) Sentences</option>
				      <option>(5) Sentences</option>
				    </select>
				  </div>
				<br />
			  	<div class="col-md-4 text-center">
			  		<button type="submit" class="btn btn-primary">Generate Report</button>
			  	</div>
			</form>
		</div>
	</div>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/bootstrap.daterangepicker/2/daterangepicker.js"></script>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script type="text/javascript">
    	// Add functionality for date range form field
		$(function() {

		    var start = moment();
		    var end = moment();

		    function cb(start, end) {
		        $('#reportrange span').html(start.format('MMMM D, YYYY') + ' - ' + end.format('MMMM D, YYYY'));
		    }

		    $('#reportrange').daterangepicker({
		        startDate: start,
		        endDate: end,
		        minDate: moment().subtract(1, 'year'),
		        maxDate: moment(),
		        ranges: {
		           'Today': [moment(), moment()],
		           'Yesterday': [moment().subtract(1, 'days'), moment().subtract(1, 'days')],
		           'Last 7 Days': [moment().subtract(6, 'days'), moment()],
		           'Last 30 Days': [moment().subtract(29, 'days'), moment()],
		           'This Month': [moment().startOf('month'), moment().endOf('month')],
		           'Last Month': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]
		        }
		    }, cb);

		    cb(start, end);

		});

		// Use Python/Flask to update form fields
		sample_topics = {'reuters': ['News',
									 'Technology',
									 'Cryptocurrency',
									 'Business',
									 'Market',
									 'International'],
						 'spoon-tamago': ['Art',
						 				  'Food',
						 				  'Music',
						 				  'Graphic Design',
						 				  'Industrial Design',
						 				  'Architecture',
						 				  'Culture']}

		d3.select('.blog-names')
		  .selectAll('.radio')
		  .on('click', function(d) {
		  	if (!this.getAttribute('class').includes('disabled')) {
		  		update_topic_list(sample_topics[this.getAttribute('name')]);
		  	}
		  })

		function update_topic_list(topics) {
			d3.select('.topics-of-interest')
			  .selectAll('.form-check')
			  .remove()
			  .exit()
			x = d3.select('.topics-of-interest')
				  .select('.container')
				  .selectAll('div')
				  .data(topics)
				  .enter()
				  .append('div')
				  .attr('class', 'form-check')
			x.append('input')
			 .attr('class', 'form-check-input')
			 .attr('type', 'checkbox')
			 .attr('id', function(d, i) {
			 	return 'inlineCheckbox'+i;
			 })
			 .attr('value', function(d) {
			  	return d;
			 })

			x.append('label')
			 .attr('class', 'form-check-label')
			 .attr('type', 'checkbox')
			 .attr('for', function(d, i) {
			 	return 'inlineCheckbox'+i;
			 })
			 .text(function(d, i) {
			 	return d+' ('+(Math.random()*100).toFixed(0)+')';
			 })


// <input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="option1">
// 						  	<label class="form-check-label" for="inlineCheckbox1">Topic 1 (12)</label>

		}
	</script>
  </body>
</html>